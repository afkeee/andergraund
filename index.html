<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kamp muusikuid, tegemas muusikat!">
    <meta name="robots" content="index,follow">
    <link rel="canonical" href="https://andergraund.ee/#artists">
    <title>andergraund disc.</title>
    <link rel="icon" type="image/x-icon" href="SIIA PANE OMA FAVICONI URL / PATH">
    <link rel="stylesheet" href="andergraund-styles.css">
</head>
<body>
    <div class="video-container">
        <!-- Upper video -->
        <video autoplay muted loop class="upper-video">
            <source src="./assets/andergraund loop.webm" type="video/webm">
        </video>

        <!-- Lower video -->
        <video autoplay muted loop class="lower-video" id="lowerVid">
            <source type="video/webm">
        </video>
    </div>

    <main>
        <section class="header-container">
            <header>
                <div class="header-content">
                    <nav onchange="changeArticle()">
                        <a href="#artists" onclick="changeArticle('artists')">artistid</a>
                        <a href="#blog" onclick="changeArticle('blog')">blogi</a>
                        <a href="#info" onclick="changeArticle('info')">info</a>
                        <a href="#contact" onclick="changeArticle('contact')">kontakt</a>
                    </nav>
                </div>
            </header>
        </section>
        <section class="content">
            <div class="content-scroll" id="article-switch">
                <article id="artists">
                    <button class="artists-slide-button slide-left" type="button" id="arrow-" onclick="changeSlide(-1)"><</button>
                    <div class="artist-card fade hidden" id="afke">
                        <div class="artist-info">
                            <h2>afke</h2>
                            <p>
                                18aastane edm/lo-fi prode Harjumaalt. Pesukarud on tema v√§rk!
                            </p>
                            <nav>
                                <a href="https://afke.ee" target="_blank" rel="noopener noreferrer">afke.ee</a>
                            </nav>
                        </div>
                        <img src="./images/raccoonpixelsortafke.jpg" alt="">
                    </div>
                    
                    <div class="artist-card fade hidden" id="metropol">
                        <div class="artist-info">
                            <h2>Metropol</h2>
                            <p>
                                Indie-rock (kuigi nad ise kirjeldavad ennast kui "avangard proge dream indie alternatiiv art grunge noise audiosound shoegaze post rokk") ansambel Viljandist
                            </p>
                        <nav>
                            <a href="https://www.instagram.com/metropolb2nd/" target="_blank" rel="noopener noreferrer">Instagram</a>
                        </nav>
                        </div>
                        <img src="images/456898940_1941772729609968_3413986241813720113_n.jpg" alt="">
                    </div>
                    <div class="artist-card fade hidden" id="ossu">
                        <div class="artist-info">
                            <h2>ossu</h2>
                            <p>
                                16-aastane Singer/Songwriter Tartust.
                            </p>
                            <nav>
                                <a href="https://www.instagram.com/ossu.archive/" target="_blank" rel="noopener noreferrer">Instagram</a>
                            </nav>
                        </div>
                        <img src="/images/ossubanner.jpg" alt="">
                    </div>
                    <div class="artist-card fade hidden" id="sundei">
                        <div class="artist-info">
                            <h2>sundei</h2>
                            <p>
                                Produtsent ja vabakutseline muusik Tartust  
                            </p>
                        </div>
                        <img src="https://images.unsplash.com/photo-1624703307604-744ec383cbf4?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
                    </div>
                    <button class="artists-slide-button slide-right" type="button" id="arrow-down" onclick="changeSlide(1)">></button>
                </article>
                <article id="blog">

                    <div class="blog-scroll">
                        <div class="blog-card" id="blog-1">
                            <div class="blog-text">
                                <h2>Blog 1</h2>
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                </p>
                            </div>
                            <div class="blog-image">
                                <img src="./images/456898940_1941772729609968_3413986241813720113_n.jpg">
                            </div>
                        </div>
    
                        <div class="blog-card" id="blog-2">
                            <div class="blog-text">
                                <h2>Blog 2</h2>
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                </p>
                            </div>
                            <div class="blog-image">
                                <img src="./images/456898940_1941772729609968_3413986241813720113_n.jpg">
                            </div>
                        </div>
                    </div>

                </article>
                <article id="info">
                    <img src="" alt="">
                    <p class="info-text">Andergraund on kamp muusikuid, tegemas muusikat! Hetkesel seisul on veebileht veel pooleli.</p>
                    <img src="" alt="">
                </article>
                <article id="contact">
                    <div class="contact-container">
                        <div class="contact-header">
                            <h3>
                                andergraund@gmail.com
                            </h3>
                        </div>
                        <div class="contact-nav">
                            <nav>
                                <a href="https://www.instagram.com/andergraunddisc/" target="_blank" rel="noopener noreferrer">
                                    <img src="./images/instagram.png" width="48">
                                </a>
                            </nav>
                            <nav>
                                <a href="https://soundcloud.com/andergraunddisc" target="_blank" rel="noopener noreferrer">
                                    <img src="./images/soundcloud.png" width="48" height="48">
                                </a>
                            </nav>
                        </div>
                    </div>
                </article>
            </div>
        </section>
    </main>
</body>
</html>

<script>
    let currentSlide = -1;
    let currentArticle = document.URL.split('/').pop().split('#').pop();
    let article = document.getElementById('article-switch')
    let slides = Array.from(document.getElementsByClassName("artist-card"));

    let videoElem = document.getElementById('lowerVid')
    let videoSrcs = {
        "default": "lillaloop4",
        "sundei": "lillaloop4",
        "afke": "afkeloop2",
        "metropol": "metropol",
        "ossu": "ossubanneruus"
    }
    let timeout;

    function updateVideoSource() {
        let newSrc;
        if (currentArticle === 'artists') {
            newSrc = `./assets/${videoSrcs[slides[currentSlide].id]}.webm`;
        } else if(currentArticle === 'blog') {
            newSrc = `./assets/${videoSrcs['default']}.webm`;
        } else {
            newSrc = `./assets/${videoSrcs['default']}.webm`;
        }

        // Check if the new source is different from the current one
        if (videoElem.src !== newSrc) {
            // Fade out the video
            videoElem.style.opacity = 0;

            // Wait for the fade-out transition (500ms), then update the video source
            setTimeout(() => {
                videoElem.src = newSrc;

                // Fade the video back in after updating the source
                videoElem.onloadeddata = () => {
                    videoElem.style.opacity = 1;
                };
            }, 500); // Duration matches the CSS transition time
        }
    }

    function showSlides() {
        if ((currentSlide + 1) >= slides.length) {
            currentSlide = 0;
        } else {
            currentSlide++;
        }

        updateVideoSource();

        if (currentArticle === 'artists') {
            slides.forEach(slide => slide.classList.add("hidden"));
            slides[currentSlide].classList.remove("hidden");
        }

        updateVideoSource();
        timeout = setTimeout(showSlides, 10000); // Changes artist every 10 seconds
    }

    function changeSlide(num) {
        clearTimeout(timeout);

        if ((currentSlide + num) >= slides.length) {
            currentSlide = 0;
        } else if ((currentSlide + num) < 0) {
            currentSlide = slides.length - 1;
        } else {
            currentSlide += num;
        }

        updateVideoSource();

        if (currentArticle === 'artists') {
            slides.forEach(slide => slide.classList.add("hidden"));
            slides[currentSlide].classList.remove("hidden");
        }

        updateVideoSource();
        timeout = setTimeout(showSlides, 10000);
    };

    function changeArticle(articleName) {
        clearTimeout(timeout); // Clear the timeout when changing articles
        currentArticle = articleName;

        if (currentArticle === 'artists') {
            changeSlide(0); // Reset the slideshow and restart if on 'artists'
        }else {
            // Hide all artist slides if not in the 'artists' section
            slides.forEach(slide => slide.classList.add("hidden"));
            updateVideoSource(); // Ensure the video changes to default
        }
    }

    showSlides();

    window.onload = function() {
        changeArticle('artists');
    };
</script>
