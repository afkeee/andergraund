<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kamp muusikuid, tegemas muusikat!">
    <meta name="robots" content="index,follow">
    <link rel="canonical" href="https://andergraund.ee/#uudised">
    <title>Andergraund Disc.</title>
    <link rel="icon" type="image/x-icon" href="./images/AA.ico">
    <link rel="stylesheet" href="andergraund-styles.css">
</head>
<body>
    <div class="video-container">
        <!-- Upper video -->
        <video autoplay muted loop class="upper-video">
            <source src="./assets/andertaustprof.webm" type="video/webm">
        </video>

        <!-- Lower video -->
        <video autoplay muted loop class="lower-video" id="lowerVid">
            <source type="video/webm">
        </video>
    </div>

    <main>
        <section class="header-container">
            <header>
                <div class="header-content">
                    <nav>
                        <a href="#uudised" onclick="changeArticle('uudised')">Uudised</a>
                        <a href="#artists" onclick="changeArticle('artists')">Artistid</a>
                    </nav>
                    <nav>
                        <a href="#info" onclick="changeArticle('info')">Info</a>
                        <a href="#contact" onclick="changeArticle('contact')">Kontakt</a>
                    </nav>
                </div>
            </header>
        </section>
        <section class="content">
            <div class="content-scroll" id="article-switch">
                <article id="uudised">

                    <div class="blog-scroll">
                        <div class="blog-card" id="blog-1">
                            <div class="blog-text">
                                <h2>"ossu, afke - "Changed For You" nüüd väljas!" 01.10.24</h2>
                                <p>
                                    Ossu ja afke tegid koos ühe emotsionaalse loo ning see on nüüd kuulatav pea igal platformil. See on ka Andergraund Disc.'i esimene väljalase!
                                </p>
                                <div class="artist-links">
                                    <nav>
                                        <a class="img-link" href="https://open.spotify.com/track/3Ev3oy10Te5zUcSYcr3klQ?si=f78e3dae9ac04b08" target="_blank" rel="noopener noreferrer">
                                            <img src="./images/spotify.png" width="48">
                                        </a>
                                    </nav>
                                    <nav>
                                        <a class="img-link" href="https://www.youtube.com/watch?v=povrQhdFP6o&list=OLAK5uy_kLXsgnilG2j-WinkW88Nv9diixSivEedY&index=1" target="_blank" rel="noopener noreferrer">
                                            <img src="./images/youtube.webp" width="48" height="48">
                                        </a>
                                    </nav>
                                    <nav>
                                        <a class="img-link" href="https://music.apple.com/us/album/changed-for-you/1770626555?i=1770626556" target="_blank" rel="noopener noreferrer">
                                            <img src="./images/applemusic.png" width="48" height="48">
                                        </a>
                                    </nav>
                                    <nav>
                                        <a class="img-link" href="https://tidal.com/browse/track/389310045" target="_blank" rel="noopener noreferrer">
                                            <img src="./images/tidal.webp" width="48" height="48">
                                        </a>
                                    </nav>
                                </div>
                            </div>
                            <div class="blog-image">
                                <iframe style="border-radius:12px" src="https://open.spotify.com/embed/album/6twhhigzmlBXk8U2hvw4kt?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>                            </div>
                            </div>
                        <div class="blog-card" id="blog-1">
                            <div class="blog-text">
                                <h2>"Veebileht" 27.09.24</h2>
                                <p>
                                    andergraund.ee sai alguse.
                                </p>
                            </div>
                        </div>
                        <div class="blog-card" id="blog-2">
                            <div class="blog-text">
                                <h2>"Ander algus!" 10.09.24</h2>
                                <p>
                                    10. juulil avasime Discordi serveri lootes sinna koguda ainult muusikuid.
                                </p>
                            </div>
                        </div>
                    </div>

                </article>
                <article id="artists">
                    <button class="artists-slide-button slide-left" type="button" id="arrow-up" onclick="changeSlide(-1)"><</button>
                    <div class="artist-card fade hidden" id="ossu">
                        <div class="artist-info">
                            <h2>ossu</h2>
                            <p>
                                16-aastane Singer/Songwriter Tartust.
                            </p>
                            <div class="artist-links">
                                <nav>
                                    <a href="https://open.spotify.com/artist/76TeHac6XxvNUNQICj9WNQ?si=dwSYY2uPSdq_yi_RIQ-fYQ" target="_blank" rel="noopener noreferrer">Spotify</a>
                                </nav>
                                <nav>
                                    <a href="https://www.instagram.com/ossu.archive/" target="_blank" rel="noopener noreferrer">Instagram</a>
                                </nav>
                            </div>
                        </div>
                        <img src="/images/ossubanner.jpg" alt="">
                    </div>
                    
                    <div class="artist-card fade hidden" id="metropol">
                        <div class="artist-info">
                            <h2>Metropol</h2>
                            <p>
                                Indie-rock (kuigi nad ise kirjeldavad ennast kui "avangard proge dream indie alternatiiv art grunge noise audiosound shoegaze post rokk") ansambel Viljandist
                            </p>
                            <div class="artist-links">
                                <nav>
                                    <a href="https://www.instagram.com/metropolb2nd/" target="_blank" rel="noopener noreferrer">Instagram</a>
                                </nav>
                            </div>
                        </div>
                        <img src="images/456898940_1941772729609968_3413986241813720113_n.jpg" alt="">
                    </div>
                    <div class="artist-card fade hidden" id="afke">
                        <div class="artist-info">
                            <h2>afke</h2>
                            <p>
                                18-aastane EDM/lo-fi produtsent ning trummar.
                            </p>
                            <div class="artist-links">
                                <nav>
                                    <a href="https://afke.ee/music" target="_blank" rel="noopener noreferrer">afke.ee</a>
                                </nav>
                            </div>
                        </div>
                        <img src="./images/raccoonpixelsortafke.jpg" alt="">
                    </div>
                    <div class="artist-card fade hidden" id="sundei">
                        <div class="artist-info">
                            <h2>sundei</h2>
                            <p>
                                Produtsent ja vabakutseline muusik Tartust  
                            </p>
                            <div class="artist-links">
                                <nav>
                                    <a href="https://sundei.ee" target="_blank" rel="noopener noreferrer">sundei.ee</a>
                                </nav>
                                <nav>
                                    <a href="https://instagram.com/sundeinotfound" target="_blank" rel="noopener noreferrer">Instagram</a>
                                </nav>
                            </div>
                        </div>
                        <img src="/images/sundie.png" alt="">
                    </div>
                    <button class="artists-slide-button slide-right" type="button" id="arrow-down" onclick="changeSlide(1)">></button>
                </article>
                <article id="info">
                    <img src="" alt="">
                    <p class="info-text">Andergraund on kamp muusikuid, tegemas muusikat! Me pakume vabadust artistile teha oma muusikaga mida iganes ilma, et me võtaksime neilt mingeid õiguseid ära.</p>
                    <p class="info-text">Andergraundi trall algas sellest, kui Ruudil ja Tauril tuli mõte teha discord, kuhu kutsuda kokku kõik muusikud, keda nad tunnevad. Selle käigus tuli väike mõte teha sellest juba plaadifirma, et aidata kuttidel ka muusika üles saada.</p>
                    <img src="" alt="">
                </article>
                <article id="contact">
                    <div class="contact-container">
                        <div class="contact-header">
                            <h3>
                                andergraund@gmail.com
                            </h3>
                        </div>
                        <div class="contact-nav">
                            <nav>
                                <a class="img-link" href="mailto: andergraunddisc@gmail.com" target="_blank" rel="noopener noreferrer">
                                    <img src="./images/mail.png" width="48">
                                </a>
                            </nav>
                            <nav>
                                <a class="img-link" href="https://discord.gg/3UHjZCXvYK" target="_blank" rel="noopener noreferrer">
                                    <img src="./images/discord-white-icon.webp" width="48">
                                </a>
                            </nav>
                            <nav>
                                <a class="img-link" href="https://www.instagram.com/andergraunddisc/" target="_blank" rel="noopener noreferrer">
                                    <img src="./images/instagram.png" width="48">
                                </a>
                            </nav>
                            <nav>
                                <a class="img-link" href="https://soundcloud.com/andergraunddisc" target="_blank" rel="noopener noreferrer">
                                    <img src="./images/soundcloud.png" width="48" height="48">
                                </a>
                            </nav>
                        </div>
                        <div>
                        </div>
                    </div>
                </article>
            </div>
        </section>
    </main>
</body>
</html>

<script>
    let currentSlide = -1;
    let currentArticle = document.URL.split('/').pop().split('#').pop();
    let article = document.getElementById('article-switch')
    let slides = Array.from(document.getElementsByClassName("artist-card"));

    let videoElem = document.getElementById('lowerVid')
    let videoSrcs = {
        "default": "anderupsidedown",
        "sundei": "sundeibannerbw",
        "afke": "afkeloop2",
        "metropol": "metropol",
        "ossu": "ossu_banner"
    }
    let timeout;

    console.log(currentArticle);
    function updateVideoSource() {
        let newSrc;
        if (currentArticle === 'artists') {
            newSrc = `./assets/${videoSrcs[slides[currentSlide].id]}.webm`;
        } else if(currentArticle === 'uudised') {
            newSrc = `./assets/${videoSrcs['default']}.webm`;
        } else {
            newSrc = `./assets/${videoSrcs['default']}.webm`;
        }

        // Check if the new source is different from the current one
        if (videoElem.src !== newSrc) {
            // Fade out the video
            videoElem.style.opacity = 0;

            // Wait for the fade-out transition (500ms), then update the video source
            setTimeout(() => {
                videoElem.src = newSrc;

                // Fade the video back in after updating the source
                videoElem.onloadeddata = () => {
                    videoElem.style.opacity = 1;
                };
            }, 500); // Duration matches the CSS transition time
        }
    }

    function showSlides() {
        if ((currentSlide + 1) >= slides.length) {
            currentSlide = 0;
        } else {
            currentSlide++;
        }

        updateVideoSource();

        if (currentArticle === 'artists') {
            slides.forEach(slide => slide.classList.add("hidden"));
            slides[currentSlide].classList.remove("hidden");
        }

        updateVideoSource();
        timeout = setTimeout(showSlides, 10000); // Changes artist every 10 seconds
    }

    function changeSlide(num) {
        clearTimeout(timeout);

        if ((currentSlide + num) >= slides.length) {
            currentSlide = 0;
        } else if ((currentSlide + num) < 0) {
            currentSlide = slides.length - 1;
        } else {
            currentSlide += num;
        }

        updateVideoSource();

        if (currentArticle === 'artists') {
            slides.forEach(slide => slide.classList.add("hidden"));
            slides[currentSlide].classList.remove("hidden");
        }

        updateVideoSource();
        timeout = setTimeout(showSlides, 10000);
    };

    function changeArticle(articleName) {
        clearTimeout(timeout); // Clear the timeout when changing articles
        currentArticle = articleName;

        if (currentArticle === 'artists') {
            changeSlide(0); // Reset the slideshow and restart if on 'artists'
        }else {
            // Hide all artist slides if not in the 'artists' section
            slides.forEach(slide => slide.classList.add("hidden"));
            updateVideoSource(); // Ensure the video changes to default
        }
    }

    showSlides();

    window.onload = function() {
        changeArticle('uudised');
    };
</script>
